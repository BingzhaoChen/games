window.__require=function t(e,i,o){function n(s,r){if(!i[s]){if(!e[s]){var a=s.split("/");if(a=a[a.length-1],!e[a]){var l="function"==typeof __require&&__require;if(!r&&l)return l(a,!0);if(c)return c(a,!0);throw new Error("Cannot find module '"+s+"'")}}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){return n(e[s][1][t]||t)},h,h.exports,t,e,i,o)}return i[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<o.length;s++)n(o[s]);return n}({BackgroundAdapter:[function(t,e,i){"use strict";cc._RF.push(e,"bd263DD+AdO15fKqN3ATgQv","BackgroundAdapter");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,r=c.property,a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return o(e,t),e.prototype.onLoad=function(){var t=Math.min(cc.view.getFrameSize().width/this.node.width,cc.view.getFrameSize().height/this.node.height),e=this.node.width*t,i=this.node.height*t;this.node.scale=Math.max(cc.view.getFrameSize().width/e,cc.view.getFrameSize().height/i)},e.prototype.start=function(){},n([r(cc.Label)],e.prototype,"label",void 0),n([r],e.prototype,"text",void 0),e=n([s],e)}(cc.Component);i.default=a,cc._RF.pop()},{}],BoxCtrl:[function(t,e,i){"use strict";cc._RF.push(e,"3227ef/7dRM5Y8eMslaWbOC","BoxCtrl");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c=t("./BoxItem"),s=t("../framework/Utils"),r=cc._decorator,a=r.ccclass,l=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxItem=null,e.items=[],e}return o(e,t),e.prototype.start=function(){this._createBox()},e.prototype._createBox=function(){for(var t=0;t<12;t++){var e=cc.instantiate(this.boxItem),i=e.getComponent(c.default);i.index=t,this.items.push(i),this.node.addChild(e)}this.schedule(this.play,4,cc.macro.REPEAT_FOREVER,0)},e.prototype.play=function(){var t=s.Utils.randomNum(0,11);this.items[t].play()},e.prototype.change=function(){for(var t=0,e=this.items;t<e.length;t++){var i=e[t];i.isPlaying||i.playFade()}},n([l(cc.Prefab)],e.prototype,"boxItem",void 0),e=n([a],e)}(cc.Component);i.default=h,cc._RF.pop()},{"../framework/Utils":"Utils","./BoxItem":"BoxItem"}],BoxItem:[function(t,e,i){"use strict";cc._RF.push(e,"83f7c8AnJdJlpAf7yrdN8CG","BoxItem");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c=t("../framework/toast"),s=cc._decorator,r=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.box=null,e.lblDesc=null,e.index=0,e.isPlaying=!1,e.userName="4564",e}return o(e,t),e.prototype.onLoad=function(){cc.log("onload"),this.lblDesc.node.active=!1},e.prototype.start=function(){},e.prototype.play=function(){this.isPlaying=!0,this.lblDesc.node.active=!0;var t=Math.random(),e=Math.round(1e4*t).toString();if(this.userName="\u7528\u6237"+e,t<.5){this.displayCheck();var i=cc.delayTime(1),o=cc.callFunc(this.displayOpen,this),n=cc.delayTime(.2),c=cc.callFunc(this.dropDown,this),s=cc.sequence(i,o,n,c);this.node.runAction(s)}else{this.displayOpen();n=cc.delayTime(.2),c=cc.callFunc(this.dropDown,this),s=cc.sequence(n,c);this.node.runAction(s)}},e.prototype.displayCheck=function(){this.lblDesc.string=this.userName+"\u6b63\u5728\u900f\u89c6"},e.prototype.displayOpen=function(){this.lblDesc.string=this.userName+"\u6b63\u5728\u8d2d\u4e70"},e.prototype.dropDown=function(){var t=this,e=this.node.convertToNodeSpaceAR(cc.v2(0,0)),i=cc.moveBy(2,cc.v2(0,e.y)),o=cc.hide(),n=cc.callFunc(function(){t.lblDesc.node.active=!1}),c=cc.place(0,0),s=cc.scaleTo(.1,.2,.2),r=cc.show(),a=cc.scaleTo(.2,1,1),l=cc.callFunc(this.dropDownCallback,this),h=cc.sequence(i,o,n,c,s,r,a,l);this.box.runAction(h)},e.prototype.dropDownCallback=function(){this.isPlaying=!1},e.prototype.playFade=function(){var t=this;this.isPlaying=!0;var e=cc.fadeOut(1),i=cc.scaleTo(1,.2,.2),o=cc.spawn(e,i),n=cc.fadeIn(1),c=cc.scaleTo(1,1,1),s=cc.spawn(n,c),r=cc.callFunc(function(){t.isPlaying=!1}),a=cc.sequence(o,s,r);this.box.runAction(a)},e.prototype.onBtnBox=function(t,e){if(this.isPlaying)c.Toast.instance.showText("\u8be5\u5b9d\u76d2\u6b63\u5728\u88ab\u64cd\u4f5c");else{cc.log("btnone");var i=new cc.Event.EventCustom("btnOne",!0);cc.systemEvent.dispatchEvent(i)}},n([a(cc.Node)],e.prototype,"box",void 0),n([a(cc.Label)],e.prototype,"lblDesc",void 0),e=n([r],e)}(cc.Component);i.default=l,cc._RF.pop()},{"../framework/toast":"toast"}],CheckLayer:[function(t,e,i){"use strict";cc._RF.push(e,"bee5bcAV6FLGod3GcP4qYZS","CheckLayer");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c=t("./Url"),s=t("./MsgTbl"),r=t("./CheckOpenLayer"),a=t("./NodOpen"),l=cc._decorator,h=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.richText=null,e.checkOpenLayer=null,e.nodOpen=null,e.msgTbl=s.default.getInstance(),e}return o(e,t),e.prototype.start=function(){var t="<color=#533A03>\u60a8\u662f\u5426\u4f7f\u7528</c><color=#e64a46>"+this.msgTbl.fluoroscopy+"\u5457\u8c46</color><color=#533A03>\uff0c\u900f\u89c6\u8be5\u5b9d\u76d2</c>";this.richText.string=t},e.prototype.onBtnClose=function(){this.node.active=!1},e.prototype.onBtnCheck=function(){var t=this,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&e.status>=200&&e.status<400){var i=e.responseText,o=JSON.parse(i);if(200===o.code){console.log(o.data),t.checkOpenLayer.initMsg(o.data),t.checkOpenLayer.node.active=!0,t.nodOpen.node.active=!1,t.node.active=!1;var n=new cc.Event.EventCustom("balance",!0);t.node.dispatchEvent(n)}}},e.open("POST",c.Url.blindboxPick(1,1),!0),e.setRequestHeader("token",c.Url.token),e.send()},n([p(cc.RichText)],e.prototype,"richText",void 0),n([p(r.default)],e.prototype,"checkOpenLayer",void 0),n([p(a.default)],e.prototype,"nodOpen",void 0),e=n([h],e)}(cc.Component);i.default=d,cc._RF.pop()},{"./CheckOpenLayer":"CheckOpenLayer","./MsgTbl":"MsgTbl","./NodOpen":"NodOpen","./Url":"Url"}],CheckOpenLayer:[function(t,e,i){"use strict";cc._RF.push(e,"0c082PeFQNPvYh5OTGXCAVT","CheckOpenLayer");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c,s=t("./MsgTbl"),r=t("./Url"),a=t("./OpenedLayer");(function(t){t[t.ABANDON=0]="ABANDON",t[t.OPEN=1]="OPEN"})(c||(c={}));var l=cc._decorator,h=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.boxValue=null,e.spr_goods=null,e.openedLayer=null,e.msgTbl=s.default.getInstance(),e.msg=null,e.id=null,e}return o(e,t),e.prototype.start=function(){this.schedule(this.bgRotation,.2)},e.prototype.bgRotation=function(){this.bg.angle=this.bg.angle+5},e.prototype.onBtnClose=function(){this.afterCheck(c.ABANDON)},e.prototype.onBtnOpen=function(){this.afterCheck(c.OPEN)},e.prototype.initMsg=function(t){var e=t[0];this.boxValue.string=e.cmoney,this.id=e.id;var i=this.msgTbl.getMsgByBlindboxID(e.blindboxId).texture;this.spr_goods.spriteFrame=new cc.SpriteFrame(i)},e.prototype.afterCheck=function(t){var e=this,i=new XMLHttpRequest;i.onreadystatechange=function(){if(4==i.readyState&&i.status>=200&&i.status<400){var t=i.responseText,o=JSON.parse(t);if(console.log(o),200===o.code){e.node.active=!1,1==o.data.orderStatus&&(e.openedLayer.initMsg([o.data]),e.openedLayer.node.active=!0);var n=new cc.Event.EventCustom("balance",!0);e.node.dispatchEvent(n)}}},i.open("POST",r.Url.openBlindboxAfterCheck(t,this.id),!0),i.setRequestHeader("token",r.Url.token),i.send()},n([p(cc.Node)],e.prototype,"bg",void 0),n([p(cc.Label)],e.prototype,"boxValue",void 0),n([p(cc.Sprite)],e.prototype,"spr_goods",void 0),n([p(a.default)],e.prototype,"openedLayer",void 0),e=n([h],e)}(cc.Component);i.default=d,cc._RF.pop()},{"./MsgTbl":"MsgTbl","./OpenedLayer":"OpenedLayer","./Url":"Url"}],Item:[function(t,e,i){"use strict";cc._RF.push(e,"ce694EBkw5JGIrJHF+HidtW","Item");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c=t("./MsgTbl"),s=cc._decorator,r=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxValue=null,e.propName=null,e.propPic=null,e.msgTbl=c.default.getInstance(),e}return o(e,t),e.prototype.start=function(){},e.prototype.initMsg=function(t){this.boxValue.string=t.cmoney,this.propName.string=t.title;var e=this.msgTbl.getMsgByBlindboxID(t.blindboxId).texture;this.propPic.spriteFrame=new cc.SpriteFrame(e)},n([a(cc.Label)],e.prototype,"boxValue",void 0),n([a(cc.Label)],e.prototype,"propName",void 0),n([a(cc.Sprite)],e.prototype,"propPic",void 0),e=n([r],e)}(cc.Component);i.default=l,cc._RF.pop()},{"./MsgTbl":"MsgTbl"}],ListItem:[function(t,e,i){"use strict";cc._RF.push(e,"ffebbANWAxKl7wHW6gtGV1x","ListItem");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c,s=cc._decorator,r=s.ccclass,a=s.property,l=s.disallowMultiple,h=s.menu,p=s.executionOrder;(function(t){t[t.NONE=0]="NONE",t[t.TOGGLE=1]="TOGGLE",t[t.SWITCH=2]="SWITCH"})(c||(c={}));var d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=null,e.title=null,e.selectedMode=c.NONE,e.selectedFlag=null,e.selectedSpriteFrame=null,e._unselectedSpriteFrame=null,e.adaptiveSize=!1,e._selected=!1,e._eventReg=!1,e}return o(e,t),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},set:function(t){if(this._selected=t,this.selectedFlag)switch(this.selectedMode){case c.TOGGLE:this.selectedFlag.active=t;break;case c.SWITCH:var e=this.selectedFlag.getComponent(cc.Sprite);e&&(e.spriteFrame=t?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"btnCom",{get:function(){return this._btnCom||(this._btnCom=this.node.getComponent(cc.Button)),this._btnCom},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){if(this.selectedMode==c.SWITCH){var t=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=t.spriteFrame}},e.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},e.prototype._registerEvent=function(){this._eventReg||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvt(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._eventReg=!0)},e.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},e.prototype.createEvt=function(t,e,i){if(void 0===i&&(i=null),t.isValid){t.comName=t.comName||t.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var o=new cc.Component.EventHandler;return o.target=i||t.node,o.component=t.comName,o.handler=e,o}},e.prototype.showAni=function(t,e,i){var o,n=this;switch(t){case 0:o=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,2*this.node.height)];break;case 1:o=[cc.scaleTo(.2,.7),cc.moveBy(.3,2*this.node.width,0)];break;case 2:o=[cc.scaleTo(.2,.7),cc.moveBy(.3,0,-2*this.node.height)];break;case 3:o=[cc.scaleTo(.2,.7),cc.moveBy(.3,-2*this.node.width,0)];break;default:o=[cc.scaleTo(.3,.1)]}(e||i)&&o.push(cc.callFunc(function(){if(i){n.list._delSingleItem(n.node);for(var t=n.list.displayData.length-1;t>=0;t--)if(n.list.displayData[t].id==n.listId){n.list.displayData.splice(t,1);break}}e()})),this.node.runAction(cc.sequence(o))},e.prototype.onClickThis=function(){this.list.selectedId=this.listId},n([a({type:cc.Sprite,tooltip:!1})],e.prototype,"icon",void 0),n([a({type:cc.Node,tooltip:!1})],e.prototype,"title",void 0),n([a({type:cc.Enum(c),tooltip:!1})],e.prototype,"selectedMode",void 0),n([a({type:cc.Node,tooltip:!1,visible:function(){return this.selectedMode>c.NONE}})],e.prototype,"selectedFlag",void 0),n([a({type:cc.SpriteFrame,tooltip:!1,visible:function(){return this.selectedMode==c.SWITCH}})],e.prototype,"selectedSpriteFrame",void 0),n([a({tooltip:!1})],e.prototype,"adaptiveSize",void 0),e=n([r,l(),h("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List Item"),p(-5001)],e)}(cc.Component);i.default=d,cc._RF.pop()},{}],List:[function(t,e,i){"use strict";cc._RF.push(e,"ca827978dBGGIIk90fmyG22","List");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c,s,r,a=cc._decorator,l=a.ccclass,h=a.property,p=a.disallowMultiple,d=a.menu,u=a.executionOrder,_=a.requireComponent,f=t("./ListItem");(function(t){t[t.NODE=1]="NODE",t[t.PREFAB=2]="PREFAB"})(c||(c={})),function(t){t[t.NORMAL=1]="NORMAL",t[t.ADHERING=2]="ADHERING",t[t.PAGE=3]="PAGE"}(s||(s={})),function(t){t[t.NONE=0]="NONE",t[t.SINGLE=1]="SINGLE",t[t.MULT=2]="MULT"}(r||(r={}));var y=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.templateType=c.NODE,e.tmpNode=null,e.tmpPrefab=null,e._slideMode=s.NORMAL,e.pageDistance=.3,e.pageChangeEvent=new cc.Component.EventHandler,e._virtual=!0,e.cyclic=!1,e.lackCenter=!1,e.lackSlide=!1,e._updateRate=0,e.frameByFrameRenderNum=0,e.renderEvent=new cc.Component.EventHandler,e.selectedMode=r.NONE,e.repeatEventSingle=!1,e.selectedEvent=null,e._selectedId=-1,e._forceUpdate=!1,e._updateDone=!0,e._numItems=0,e._inited=!1,e._needUpdateWidget=!1,e._aniDelRuning=!1,e._doneAfterUpdate=!1,e.adhering=!1,e._adheringBarrier=!1,e.curPageNum=0,e}return o(e,t),Object.defineProperty(e.prototype,"slideMode",{get:function(){return this._slideMode},set:function(t){this._slideMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"virtual",{get:function(){return this._virtual},set:function(t){null!=t&&(this._virtual=t),0!=this._numItems&&this._onScrolling()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updateRate",{get:function(){return this._updateRate},set:function(t){t>=0&&t<=6&&(this._updateRate=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectedId",{get:function(){return this._selectedId},set:function(t){var e,i=this;switch(i.selectedMode){case r.SINGLE:if(!i.repeatEventSingle&&t==i._selectedId)return;e=i.getItemByListId(t);var o=void 0;if(i._selectedId>=0?i._lastSelectedId=i._selectedId:i._lastSelectedId=null,i._selectedId=t,e&&((o=e.getComponent(f.default)).selected=!0),i._lastSelectedId>=0&&i._lastSelectedId!=i._selectedId){var n=i.getItemByListId(i._lastSelectedId);n&&(n.getComponent(f.default).selected=!1)}i.selectedEvent&&cc.Component.EventHandler.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems);break;case r.MULT:if(!(e=i.getItemByListId(t)))return;o=e.getComponent(f.default);i._selectedId>=0&&(i._lastSelectedId=i._selectedId),i._selectedId=t;var c=!o.selected;o.selected=c;var s=i.multSelected.indexOf(t);c&&s<0?i.multSelected.push(t):!c&&s>=0&&i.multSelected.splice(s,1),i.selectedEvent&&cc.Component.EventHandler.emitEvents([i.selectedEvent],e,t%this._actualNumItems,null==i._lastSelectedId?null:i._lastSelectedId%this._actualNumItems,c)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(t){var e=this;if(e.checkInited(!1))if(null==t||t<0)cc.error("numItems set the wrong::",t);else if(e._actualNumItems=e._numItems=t,e._forceUpdate=!0,e._virtual)e._resizeContent(),e.cyclic&&(e._numItems=e._cyclicNum*e._numItems),e._onScrolling(),e.frameByFrameRenderNum||e.slideMode!=s.PAGE||(e.curPageNum=e.nearestListId);else{var i=e.content.getComponent(cc.Layout);if(i&&(i.enabled=!0),e._delRedundantItem(),e.firstListId=0,e.frameByFrameRenderNum>0){for(var o=e.frameByFrameRenderNum>e._numItems?e._numItems:e.frameByFrameRenderNum,n=0;n<o;n++)e._createOrUpdateItem2(n);e.frameByFrameRenderNum<e._numItems&&(e._updateCounter=e.frameByFrameRenderNum,e._updateDone=!1)}else{for(n=0;n<t;n++)e._createOrUpdateItem2(n);e.displayItemNum=t}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!0,configurable:!0}),e.prototype.onLoad=function(){this._init()},e.prototype.onDestroy=function(){var t=this;for(t._itemTmp&&t._itemTmp.isValid&&t._itemTmp.destroy(),t.tmpNode&&t.tmpNode.isValid&&t.tmpNode.destroy();t._pool.size();){t._pool.get().destroy()}},e.prototype.onEnable=function(){this._registerEvent(),this._init()},e.prototype.onDisable=function(){this._unregisterEvent()},e.prototype._registerEvent=function(){var t=this;t.node.on(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.on("touch-up",t._onTouchUp,t),t.node.on(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.on("scroll-began",t._onScrollBegan,t,!0),t.node.on("scroll-ended",t._onScrollEnded,t,!0),t.node.on("scrolling",t._onScrolling,t,!0),t.node.on(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._unregisterEvent=function(){var t=this;t.node.off(cc.Node.EventType.TOUCH_START,t._onTouchStart,t,!0),t.node.off("touch-up",t._onTouchUp,t),t.node.off(cc.Node.EventType.TOUCH_CANCEL,t._onTouchCancelled,t,!0),t.node.off("scroll-began",t._onScrollBegan,t,!0),t.node.off("scroll-ended",t._onScrollEnded,t,!0),t.node.off("scrolling",t._onScrolling,t,!0),t.node.off(cc.Node.EventType.SIZE_CHANGED,t._onSizeChanged,t)},e.prototype._init=function(){var t=this;if(!t._inited)if(t._scrollView=t.node.getComponent(cc.ScrollView),t.content=t._scrollView.content,t.content){switch(t._layout=t.content.getComponent(cc.Layout),t._align=t._layout.type,t._resizeMode=t._layout.resizeMode,t._startAxis=t._layout.startAxis,t._topGap=t._layout.paddingTop,t._rightGap=t._layout.paddingRight,t._bottomGap=t._layout.paddingBottom,t._leftGap=t._layout.paddingLeft,t._columnGap=t._layout.spacingX,t._lineGap=t._layout.spacingY,t._colLineNum,t._verticalDir=t._layout.verticalDirection,t._horizontalDir=t._layout.horizontalDirection,t.setTemplateItem(cc.instantiate(t.templateType==c.PREFAB?t.tmpPrefab:t.tmpNode)),t._slideMode!=s.ADHERING&&t._slideMode!=s.PAGE||(t._scrollView.inertia=!1,t._scrollView._onMouseWheel=function(){}),t.virtual||(t.lackCenter=!1),t._lastDisplayData=[],t.displayData=[],t._pool=new cc.NodePool,t._forceUpdate=!1,t._updateCounter=0,t._updateDone=!0,t.curPageNum=0,t.cyclic&&(t._scrollView._processAutoScrolling=this._processAutoScrolling.bind(t),t._scrollView._startBounceBackIfNeeded=function(){return!1}),t._align){case cc.Layout.Type.HORIZONTAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(t._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(t._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:t._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:t._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(t._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:t._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:t._alignCalcType=2}}}t.content.removeAllChildren(),t._inited=!0}else cc.error(t.node.name+"'s cc.ScrollView unset content!")},e.prototype._processAutoScrolling=function(t){this._scrollView._autoScrollAccumulatedTime+=1*t;var e=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var i=e-1;e=i*i*i*i*i+1}var o=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(e)),n=this._scrollView.getScrollEndedEventTiming(),c=Math.abs(e-1)<=n;Math.abs(e-1)<=this._scrollView.getScrollEndedEventTiming()&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),c&&(this._scrollView._autoScrolling=!1);var s=o.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(s),c),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},e.prototype.setTemplateItem=function(t){if(t){var e=this;e._itemTmp=t,e._resizeMode==cc.Layout.ResizeMode.CHILDREN?e._itemSize=e._layout.cellSize:e._itemSize=cc.size(t.width,t.height);var i=t.getComponent(f.default),o=!1;switch(i||(o=!0),o&&(e.selectedMode=r.NONE),(i=t.getComponent(cc.Widget))&&i.enabled&&(e._needUpdateWidget=!0),e.selectedMode==r.MULT&&(e.multSelected=[]),e._align){case cc.Layout.Type.HORIZONTAL:e._colLineNum=1,e._sizeType=!1;break;case cc.Layout.Type.VERTICAL:e._colLineNum=1,e._sizeType=!0;break;case cc.Layout.Type.GRID:switch(e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var n=e.content.width-e._leftGap-e._rightGap;e._colLineNum=Math.floor((n+e._columnGap)/(e._itemSize.width+e._columnGap)),e._sizeType=!0;break;case cc.Layout.AxisDirection.VERTICAL:var c=e.content.height-e._topGap-e._bottomGap;e._colLineNum=Math.floor((c+e._lineGap)/(e._itemSize.height+e._lineGap)),e._sizeType=!1}}}},e.prototype.checkInited=function(t){return void 0===t&&(t=!0),!!this._inited||(t&&cc.error("List initialization not completed!"),!1)},e.prototype._resizeContent=function(){var t,e=this;switch(e._align){case cc.Layout.Type.HORIZONTAL:if(e._customSize){var i=e._getFixedSize(null);t=e._leftGap+i.val+e._itemSize.width*(e._numItems-i.count)+e._columnGap*(e._numItems-1)+e._rightGap}else t=e._leftGap+e._itemSize.width*e._numItems+e._columnGap*(e._numItems-1)+e._rightGap;break;case cc.Layout.Type.VERTICAL:if(e._customSize){i=e._getFixedSize(null);t=e._topGap+i.val+e._itemSize.height*(e._numItems-i.count)+e._lineGap*(e._numItems-1)+e._bottomGap}else t=e._topGap+e._itemSize.height*e._numItems+e._lineGap*(e._numItems-1)+e._bottomGap;break;case cc.Layout.Type.GRID:switch(e.lackCenter&&(e.lackCenter=!1),e._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:var o=Math.ceil(e._numItems/e._colLineNum);t=e._topGap+e._itemSize.height*o+e._lineGap*(o-1)+e._bottomGap;break;case cc.Layout.AxisDirection.VERTICAL:var n=Math.ceil(e._numItems/e._colLineNum);t=e._leftGap+e._itemSize.width*n+e._columnGap*(n-1)+e._rightGap}}var c=e.content.getComponent(cc.Layout);if(c&&(c.enabled=!1),e._allItemSize=t,e._allItemSizeNoEdge=e._allItemSize-(e._sizeType?e._topGap+e._bottomGap:e._leftGap+e._rightGap),e.cyclic){var s=e._sizeType?e.node.height:e.node.width;e._cyclicPos1=0,s-=e._cyclicPos1,e._cyclicNum=Math.ceil(s/e._allItemSizeNoEdge)+1;var r=e._sizeType?e._lineGap:e._columnGap;e._cyclicPos2=e._cyclicPos1+e._allItemSizeNoEdge+r,e._cyclicAllItemSize=e._allItemSize+e._allItemSizeNoEdge*(e._cyclicNum-1)+r*(e._cyclicNum-1),e._cycilcAllItemSizeNoEdge=e._allItemSizeNoEdge*e._cyclicNum,e._cycilcAllItemSizeNoEdge+=r*(e._cyclicNum-1)}e._lack=!e.cyclic&&e._allItemSize<(e._sizeType?e.node.height:e.node.width);var a=e._lack&&e.lackCenter||!e.lackSlide?.1:0,l=e._lack?(e._sizeType?e.node.height:e.node.width)-a:e.cyclic?e._cyclicAllItemSize:e._allItemSize;l<0&&(l=0),e._sizeType?e.content.height=l:e.content.width=l},e.prototype._onScrolling=function(t){if(void 0===t&&(t=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&t&&"scroll-ended"!=t.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var e=this.content.getPosition();e=this._sizeType?e.y:e.x;var i=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),o=this._sizeType?cc.v2(0,i):cc.v2(i,0);switch(this._alignCalcType){case 1:e>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):e<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)));break;case 2:e<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):e>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 3:e<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):e>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 4:e>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):e<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)))}}var n,c,s,r;if(this._calcViewPos(),this._sizeType?(n=this.viewTop,s=this.viewBottom):(c=this.viewRight,r=this.viewLeft),this._virtual){this.displayData=[];var a=void 0,l=0,h=this._numItems-1;if(this._customSize)for(var p=!1;l<=h&&!p;l++)switch(a=this._calcItemPos(l),this._align){case cc.Layout.Type.HORIZONTAL:a.right>=r&&a.left<=c?this.displayData.push(a):0!=l&&this.displayData.length>0&&(p=!0);break;case cc.Layout.Type.VERTICAL:a.bottom<=n&&a.top>=s?this.displayData.push(a):0!=l&&this.displayData.length>0&&(p=!0);break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:a.bottom<=n&&a.top>=s?this.displayData.push(a):0!=l&&this.displayData.length>0&&(p=!0);break;case cc.Layout.AxisDirection.VERTICAL:a.right>=r&&a.left<=c?this.displayData.push(a):0!=l&&this.displayData.length>0&&(p=!0)}}else{var d=this._itemSize.width+this._columnGap,u=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:l=(r+this._leftGap)/d,h=(c+this._rightGap)/d;break;case 2:l=(-c-this._rightGap)/d,h=(-r-this._leftGap)/d;break;case 3:l=(-n-this._topGap)/u,h=(-s-this._bottomGap)/u;break;case 4:l=(s+this._bottomGap)/u,h=(n+this._topGap)/u}for(l=Math.floor(l)*this._colLineNum,h=Math.ceil(h)*this._colLineNum,h--,l<0&&(l=0),h>=this._numItems&&(h=this._numItems-1);l<=h;l++)this.displayData.push(this._calcItemPos(l))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var _=this._lastDisplayData.length,f=this.displayItemNum!=_;if(f&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(t,e){return t-e}),f=this.firstListId!=this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!=this._lastDisplayData[_-1]),this._forceUpdate||f)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{this._lastDisplayData=[];for(var y=0;y<this.displayItemNum;y++)this._createOrUpdateItem(this.displayData[y]);this._forceUpdate=!1}this._calcNearestItem()}}},e.prototype._calcViewPos=function(){var t=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=t.x>0?t.x:0,this.viewLeft=(t.x<0?-t.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=t.x<0?-t.x:0,this.viewRight=(t.x>0?-t.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=t.y<0?Math.abs(t.y):0,this.viewTop=(t.y>0?-t.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=t.y>0?Math.abs(t.y):0,this.viewBottom=(t.y<0?-t.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},e.prototype._calcItemPos=function(t){var e,i,o,n,c,s,r,a;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var l=this._getFixedSize(t);c=this._leftGap+(this._itemSize.width+this._columnGap)*(t-l.count)+(l.val+this._columnGap*l.count),e=(h=this._customSize[t])>0?h:this._itemSize.width}else c=this._leftGap+(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(s=c+e,this.lackCenter)c+=p=this.content.width/2-this._allItemSizeNoEdge/2,s+=p;return{id:t,left:c,right:s,x:c+this._itemTmp.anchorX*e,y:this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:if(this._customSize){l=this._getFixedSize(t);s=-this._rightGap-(this._itemSize.width+this._columnGap)*(t-l.count)-(l.val+this._columnGap*l.count),e=(h=this._customSize[t])>0?h:this._itemSize.width}else s=-this._rightGap-(this._itemSize.width+this._columnGap)*t,e=this._itemSize.width;if(c=s-e,this.lackCenter)c-=p=this.content.width/2-this._allItemSizeNoEdge/2,s-=p;return{id:t,right:s,left:c,x:c+this._itemTmp.anchorX*e,y:this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:if(this._customSize){l=this._getFixedSize(t);o=-this._topGap-(this._itemSize.height+this._lineGap)*(t-l.count)-(l.val+this._lineGap*l.count),i=(h=this._customSize[t])>0?h:this._itemSize.height}else o=-this._topGap-(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;if(n=o-i,this.lackCenter)o-=p=this.content.height/2-this._allItemSizeNoEdge/2,n-=p;return{id:t,top:o,bottom:n,x:this._itemTmp.x,y:n+this._itemTmp.anchorY*i};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:if(this._customSize){var h;l=this._getFixedSize(t);n=this._bottomGap+(this._itemSize.height+this._lineGap)*(t-l.count)+(l.val+this._lineGap*l.count),i=(h=this._customSize[t])>0?h:this._itemSize.height}else n=this._bottomGap+(this._itemSize.height+this._lineGap)*t,i=this._itemSize.height;var p;if(o=n+i,this.lackCenter)o+=p=this.content.height/2-this._allItemSizeNoEdge/2,n+=p;return{id:t,top:o,bottom:n,x:this._itemTmp.x,y:n+this._itemTmp.anchorY*i}}case cc.Layout.Type.GRID:var d=Math.floor(t/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:a=(n=(o=-this._topGap-(this._itemSize.height+this._lineGap)*d)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:o=(n=this._bottomGap+(this._itemSize.height+this._lineGap)*d)+this._itemSize.height,a=n+this._itemTmp.anchorY*this._itemSize.height}switch(r=this._leftGap+t%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:r+=this._itemTmp.anchorX*this._itemSize.width,r-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:r+=(1-this._itemTmp.anchorX)*this._itemSize.width,r-=(1-this.content.anchorX)*this.content.width,r*=-1}return{id:t,top:o,bottom:n,x:r,y:a};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:s=(c=this._leftGap+(this._itemSize.width+this._columnGap)*d)+this._itemSize.width,r=c+this._itemTmp.anchorX*this._itemSize.width,r-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:r=(c=(s=-this._rightGap-(this._itemSize.width+this._columnGap)*d)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,r+=(1-this.content.anchorX)*this.content.width}switch(a=-this._topGap-t%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:a-=(1-this._itemTmp.anchorY)*this._itemSize.height,a+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:a-=this._itemTmp.anchorY*this._itemSize.height,a+=this.content.anchorY*this.content.height,a*=-1}return{id:t,left:c,right:s,x:r,y:a}}}},e.prototype._calcExistItemPos=function(t){var e=this.getItemByListId(t);if(!e)return null;var i={id:t,x:e.x,y:e.y};return this._sizeType?(i.top=e.y+e.height*(1-e.anchorY),i.bottom=e.y-e.height*e.anchorY):(i.left=e.x-e.width*e.anchorX,i.right=e.x+e.width*(1-e.anchorX)),i},e.prototype.getItemPos=function(t){return this._virtual?this._calcItemPos(t):this.frameByFrameRenderNum?this._calcItemPos(t):this._calcExistItemPos(t)},e.prototype._getFixedSize=function(t){if(!this._customSize)return null;null==t&&(t=this._numItems);var e=0,i=0;for(var o in this._customSize)parseInt(o)<t&&(e+=this._customSize[o],i++);return{val:e,count:i}},e.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},e.prototype._onScrollEnded=function(){var t=this;if(null!=t.scrollToListId){var e=t.getItemByListId(t.scrollToListId);t.scrollToListId=null,e&&e.runAction(cc.sequence(cc.scaleTo(.1,1.06),cc.scaleTo(.1,1)))}t._onScrolling(),t._slideMode!=s.ADHERING||t.adhering?t._slideMode==s.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()):t.adhere()},e.prototype._onTouchStart=function(t,e){if(!this._scrollView._hasNestedViewGroup(t,e)&&!(t.eventPhase===cc.Event.AT_TARGET&&t.target===this.node)){for(var i=t.target;null==i._listId&&i.parent;)i=i.parent;this._scrollItem=null!=i._listId?i:t.target}},e.prototype._onTouchUp=function(){var t=this;t._scrollPos=null,t._slideMode==s.ADHERING?(this.adhering&&(this._adheringBarrier=!0),t.adhere()):t._slideMode==s.PAGE&&(null!=t._beganPos?this._pageAdhere():t.adhere()),this._scrollItem=null},e.prototype._onTouchCancelled=function(t,e){var i=this;i._scrollView._hasNestedViewGroup(t,e)||t.simulate||(i._scrollPos=null,i._slideMode==s.ADHERING?(i.adhering&&(i._adheringBarrier=!0),i.adhere()):i._slideMode==s.PAGE&&(null!=i._beganPos?i._pageAdhere():i.adhere()),this._scrollItem=null)},e.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},e.prototype._onItemAdaptive=function(t){if(!this._sizeType&&t.width!=this._itemSize.width||this._sizeType&&t.height!=this._itemSize.height){this._customSize||(this._customSize={});var e=this._sizeType?t.height:t.width;this._customSize[t._listId]!=e&&(this._customSize[t._listId]=e,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},e.prototype._pageAdhere=function(){var t=this;if(t.cyclic||!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){var e=t._sizeType?t.viewTop:t.viewLeft,i=(t._sizeType?t.node.height:t.node.width)*t.pageDistance;if(Math.abs(t._beganPos-e)>i){switch(t._alignCalcType){case 1:case 4:t._beganPos>e?t.prePage(.5):t.nextPage(.5);break;case 2:case 3:t._beganPos<e?t.prePage(.5):t.nextPage(.5)}}else t.elasticTop<=0&&t.elasticRight<=0&&t.elasticBottom<=0&&t.elasticLeft<=0&&t.adhere();t._beganPos=null}},e.prototype.adhere=function(){var t=this;if(t.checkInited()&&!(t.elasticTop>0||t.elasticRight>0||t.elasticBottom>0||t.elasticLeft>0)){t.adhering=!0,t._calcNearestItem();var e=(t._sizeType?t._topGap:t._leftGap)/(t._sizeType?t.node.height:t.node.width);t.scrollTo(t.nearestListId,.7,e)}},e.prototype.update=function(){if(!(this.frameByFrameRenderNum<=0||this._updateDone))if(this._virtual){for(var t=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++){var i=this.displayData[e];i&&this._createOrUpdateItem(i)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(t=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,e=this._updateCounter;e<t;e++)this._createOrUpdateItem2(e);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode==s.PAGE&&(this.curPageNum=this.nearestListId)},e.prototype._createOrUpdateItem=function(t){var e=this.getItemByListId(t.id);if(e)this._forceUpdate&&this.renderEvent&&(e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems));else{var i=this._pool.size()>0;if((e=i?this._pool.get():cc.instantiate(this._itemTmp))._listId!=t.id&&(e._listId=t.id,e.setContentSize(this._itemSize)),e.setPosition(cc.v2(t.x,t.y)),this._resetItemSize(e),this.content.addChild(e),i&&this._needUpdateWidget){var o=e.getComponent(cc.Widget);o&&o.updateAlignment()}e.setSiblingIndex(this.content.childrenCount-1);var n=e.getComponent(f.default);e.listItem=n,n&&(n.listId=t.id,n.list=this,n._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],e,t.id%this._actualNumItems)}this._resetItemSize(e),this._updateListItem(e.listItem),this._lastDisplayData.indexOf(t.id)<0&&this._lastDisplayData.push(t.id)},e.prototype._createOrUpdateItem2=function(t){var e,i=this.content.children[t];i?this._forceUpdate&&this.renderEvent&&(i._listId=t,e&&(e.listId=t),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,t)):((i=cc.instantiate(this._itemTmp))._listId=t,this.content.addChild(i),e=i.getComponent(f.default),i.listItem=e,e&&(e.listId=t,e.list=this,e._registerEvent()),this.renderEvent&&cc.Component.EventHandler.emitEvents([this.renderEvent],i,t)),this._updateListItem(e),this._lastDisplayData.indexOf(t)<0&&this._lastDisplayData.push(t)},e.prototype._updateListItem=function(t){if(t&&this.selectedMode>r.NONE){var e=t.node;switch(this.selectedMode){case r.SINGLE:t.selected=this.selectedId==e._listId;break;case r.MULT:t.selected=this.multSelected.indexOf(e._listId)>=0}}},e.prototype._resetItemSize=function(t){},e.prototype._updateItemPos=function(t){var e=isNaN(t)?t:this.getItemByListId(t),i=this.getItemPos(e._listId);e.setPosition(i.x,i.y)},e.prototype.setMultSelected=function(t,e){var i=this;if(i.checkInited()){if(Array.isArray(t)||(t=[t]),null==e)i.multSelected=t;else{var o=void 0,n=void 0;if(e)for(var c=t.length-1;c>=0;c--)o=t[c],(n=i.multSelected.indexOf(o))<0&&i.multSelected.push(o);else for(c=t.length-1;c>=0;c--)o=t[c],(n=i.multSelected.indexOf(o))>=0&&i.multSelected.splice(n,1)}i._forceUpdate=!0,i._onScrolling()}},e.prototype.updateItem=function(t){if(this.checkInited()){Array.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var o=t[e],n=this.getItemByListId(o);n&&cc.Component.EventHandler.emitEvents([this.renderEvent],n,o%this._actualNumItems)}}},e.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},e.prototype.getItemByListId=function(t){for(var e=this.content.childrenCount-1;e>=0;e--){var i=this.content.children[e];if(i._listId==t)return i}},e.prototype._getOutsideItem=function(){for(var t,e=[],i=this.content.childrenCount-1;i>=0;i--)t=this.content.children[i],this.displayData.find(function(e){return e.id==t._listId})||e.push(t);return e},e.prototype._delRedundantItem=function(){if(this._virtual)for(var t=this._getOutsideItem(),e=t.length-1;e>=0;e--){var i=t[e];if(!this._scrollItem||i._listId!=this._scrollItem._listId){this._pool.put(i);for(var o=this._lastDisplayData.length-1;o>=0;o--)if(this._lastDisplayData[o]==i._listId){this._lastDisplayData.splice(o,1);break}}}else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},e.prototype._delSingleItem=function(t){t.removeFromParent(),t.destroy&&t.destroy(),t=null},e.prototype.aniDelItem=function(t,e,i){var o=this;if(!o.checkInited()||o.cyclic||!o._virtual)return cc.error("This function is not allowed to be called!");if(o._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var n,c=o.getItemByListId(t);if(c){n=c.getComponent(f.default),o._aniDelRuning=!0;var s=o.displayData[o.displayData.length-1].id,a=n.selected;n.showAni(i,function(){var i;if(s<o._numItems-2&&(i=s+1),null!=i){var n=o._calcItemPos(i);o.displayData.push(n),o._virtual?o._createOrUpdateItem(n):o._createOrUpdateItem2(i)}else o._numItems--;if(o.selectedMode==r.SINGLE)a?o._selectedId=-1:o._selectedId-1>=0&&o._selectedId--;else if(o.selectedMode==r.MULT&&o.multSelected.length){var l=o.multSelected.indexOf(t);l>=0&&o.multSelected.splice(l,1);for(var h=o.multSelected.length-1;h>=0;h--){(u=o.multSelected[h])>=t&&o.multSelected[h]--}}if(o._customSize){o._customSize[t]&&delete o._customSize[t];var p={},d=void 0;for(var u in o._customSize){d=o._customSize[u];var _=parseInt(u);p[_-(_>=t?1:0)]=d}o._customSize=p}var f,y;for(h=null!=i?i:s;h>=t+1;h--)if(c=o.getItemByListId(h)){var m=o._calcItemPos(h-1);f=[cc.moveTo(.2333,cc.v2(m.x,m.y))],h<=t+1&&(y=!0,f.push(cc.callFunc(function(){o._aniDelRuning=!1,e(t)}))),f.length>1?c.runAction(cc.sequence(f)):c.runAction(f[0])}y||(o._aniDelRuning=!1,e(t))},!0)}else e(t)},e.prototype.scrollTo=function(t,e,i,o){void 0===e&&(e=.5),void 0===i&&(i=null),void 0===o&&(o=!1);var n=this;if(n.checkInited(!1)){null==e?e=.5:e<0&&(e=0),t<0?t=0:t>=n._numItems&&(t=n._numItems-1),!n._virtual&&n._layout&&n._layout.enabled&&n._layout.updateLayout();var c,s,r=n.getItemPos(t);switch(n._alignCalcType){case 1:c=r.left,c-=null!=i?n.node.width*i:n._leftGap,r=cc.v2(c,0);break;case 2:c=r.right-n.node.width,c+=null!=i?n.node.width*i:n._rightGap,r=cc.v2(c+n.content.width,0);break;case 3:s=r.top,s+=null!=i?n.node.height*i:n._topGap,r=cc.v2(0,-s);break;case 4:s=r.bottom+n.node.height,s-=null!=i?n.node.height*i:n._bottomGap,r=cc.v2(0,-s+n.content.height)}var a=n.content.getPosition();a=Math.abs(n._sizeType?a.y:a.x);var l=n._sizeType?r.y:r.x;Math.abs((null!=n._scrollPos?n._scrollPos:a)-l)>.5&&(n._scrollView.scrollToOffset(r,e),n._scrollToListId=t,n._scrollToEndTime=(new Date).getTime()/1e3+e,n._scrollToSo=n.scheduleOnce(function(){if(n._adheringBarrier||(n.adhering=n._adheringBarrier=!1),n._scrollPos=n._scrollToListId=n._scrollToEndTime=n._scrollToSo=null,o){var e=n.getItemByListId(t);e&&e.runAction(cc.sequence(cc.scaleTo(.1,1.05),cc.scaleTo(.1,1)))}},e+.1),e<=0&&n._onScrolling())}},e.prototype._calcNearestItem=function(){var t,e,i,o,n,c,s=this;s.nearestListId=null,s._virtual&&s._calcViewPos(),i=s.viewTop,o=s.viewRight,n=s.viewBottom,c=s.viewLeft;for(var r=!1,a=0;a<s.content.childrenCount&&!r;a+=s._colLineNum)if(t=s._virtual?s.displayData[a]:s._calcExistItemPos(a))switch(e=s._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,s._alignCalcType){case 1:t.right>=c&&(s.nearestListId=t.id,c>e&&(s.nearestListId+=s._colLineNum),r=!0);break;case 2:t.left<=o&&(s.nearestListId=t.id,o<e&&(s.nearestListId+=s._colLineNum),r=!0);break;case 3:t.bottom<=i&&(s.nearestListId=t.id,i<e&&(s.nearestListId+=s._colLineNum),r=!0);break;case 4:t.top>=n&&(s.nearestListId=t.id,n>e&&(s.nearestListId+=s._colLineNum),r=!0)}if((t=s._virtual?s.displayData[s.displayItemNum-1]:s._calcExistItemPos(s._numItems-1))&&t.id==s._numItems-1)switch(e=s._sizeType?(t.top+t.bottom)/2:e=(t.left+t.right)/2,s._alignCalcType){case 1:o>e&&(s.nearestListId=t.id);break;case 2:c<e&&(s.nearestListId=t.id);break;case 3:n<e&&(s.nearestListId=t.id);break;case 4:i>e&&(s.nearestListId=t.id)}},e.prototype.prePage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,t)},e.prototype.nextPage=function(t){void 0===t&&(t=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,t)},e.prototype.skipPage=function(t,e){var i=this;if(i.checkInited())return i._slideMode!=s.PAGE?cc.error("This function is not allowed to be called, Must SlideMode = PAGE!"):void(t<0||t>=i._numItems||i.curPageNum!=t&&(i.curPageNum=t,i.pageChangeEvent&&cc.Component.EventHandler.emitEvents([i.pageChangeEvent],t),i.scrollTo(t,e)))},e.prototype.calcCustomSize=function(t){var e=this;if(e.checkInited()){if(!e._itemTmp)return cc.error("Unset template item!");if(!e.renderEvent)return cc.error("Unset Render-Event!");e._customSize={};var i=cc.instantiate(e._itemTmp);e.content.addChild(i);for(var o=0;o<t;o++)cc.Component.EventHandler.emitEvents([e.renderEvent],i,o),i.height==e._itemSize.height&&i.width==e._itemSize.width||(e._customSize[o]=e._sizeType?i.height:i.width);return Object.keys(e._customSize).length||(e._customSize=null),i.removeFromParent(),i.destroy&&i.destroy(),e._customSize}},n([h({type:cc.Enum(c),tooltip:!1})],e.prototype,"templateType",void 0),n([h({type:cc.Node,tooltip:!1,visible:function(){return this.templateType==c.NODE}})],e.prototype,"tmpNode",void 0),n([h({type:cc.Prefab,tooltip:!1,visible:function(){return this.templateType==c.PREFAB}})],e.prototype,"tmpPrefab",void 0),n([h()],e.prototype,"_slideMode",void 0),n([h({type:cc.Enum(s),tooltip:!1})],e.prototype,"slideMode",null),n([h({type:cc.Float,range:[0,1,.1],tooltip:!1,slide:!0,visible:function(){return this._slideMode==s.PAGE}})],e.prototype,"pageDistance",void 0),n([h({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this._slideMode==s.PAGE}})],e.prototype,"pageChangeEvent",void 0),n([h()],e.prototype,"_virtual",void 0),n([h({type:cc.Boolean,tooltip:!1})],e.prototype,"virtual",null),n([h({tooltip:!1,visible:function(){var t=this.virtual&&this.slideMode!=s.PAGE;return t||(this.cyclic=!1),t}})],e.prototype,"cyclic",void 0),n([h({tooltip:!1,visible:function(){return this.virtual}})],e.prototype,"lackCenter",void 0),n([h({tooltip:!1,visible:function(){var t=this.virtual&&!this.lackCenter;return t||(this.lackSlide=!1),t}})],e.prototype,"lackSlide",void 0),n([h({type:cc.Integer})],e.prototype,"_updateRate",void 0),n([h({type:cc.Integer,range:[0,6,1],tooltip:!1,slide:!0})],e.prototype,"updateRate",null),n([h({type:cc.Integer,range:[0,12,1],tooltip:!1,slide:!0})],e.prototype,"frameByFrameRenderNum",void 0),n([h({type:cc.Component.EventHandler,tooltip:!1})],e.prototype,"renderEvent",void 0),n([h({type:cc.Enum(r),tooltip:!1})],e.prototype,"selectedMode",void 0),n([h({tooltip:!1,visible:function(){return this.selectedMode==r.SINGLE}})],e.prototype,"repeatEventSingle",void 0),n([h({type:cc.Component.EventHandler,tooltip:!1,visible:function(){return this.selectedMode>r.NONE}})],e.prototype,"selectedEvent",void 0),n([h({serializable:!1})],e.prototype,"_numItems",void 0),e=n([l,p(),d("\u81ea\u5b9a\u4e49\u7ec4\u4ef6/List"),_(cc.ScrollView),u(-5e3)],e)}(cc.Component);i.default=y,cc._RF.pop()},{"./ListItem":"ListItem"}],MainScene:[function(t,e,i){"use strict";cc._RF.push(e,"658dcTqCq1EsYsnCLnPmDep","MainScene");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c=cc._decorator,s=c.ccclass,r=c.property,a=t("./Url"),l=t("../framework/UIScrollSelect"),h=t("./NodOpen"),p=t("./MsgTbl"),d=t("../framework/Utils"),u=t("./MoreLayer"),_=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodRule=null,e.nodView=null,e.lblOne=null,e.lblTwo=null,e.lblThree=null,e.lblBalance=null,e.ctrl=null,e.nodOpen=null,e.moreLayer=null,e.rankLayer=null,e.textures=null,e.blindboxMsg=[],e.msgTbl=p.default.getInstance(),e}return o(e,t),e.prototype.onLoad=function(){this.ctrl.node.active=!1,this.nodOpen.node.active=!1,this.moreLayer.node.active=!1,this.blindboxPrice(),this.balance(),this.bindbox(),this.node.on("balance",this.balance,this),cc.systemEvent.on("btnOne",this.onBtnOne,this)},e.prototype.start=function(){},e.prototype.onRuleConfirm=function(t,e){this.nodRule.active=!1},e.prototype.onBtnRule=function(t,e){this.nodRule.active=!0},e.prototype.blindboxPrice=function(){var t=this,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&e.status>=200&&e.status<400){var i=e.responseText,o=JSON.parse(i);200===o.code&&(console.log(o.data),t.lblOne.string=o.data.blind_box_one_pay+"\u5f001\u76d2",t.lblTwo.string=o.data.blind_box_two_pay+"\u5f002\u76d2",t.lblThree.string=o.data.blind_box_three_pay+"\u5f003\u76d2",t.msgTbl.fluoroscopy=o.data.blind_box_fluoroscopy)}},e.open("POST",a.Url.blindboxPrice(),!0),e.setRequestHeader("token",a.Url.token),e.send()},e.prototype.balance=function(){var t=this,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&e.status>=200&&e.status<400){var i=e.responseText,o=JSON.parse(i);200===o.code&&(console.log(o.data),t.lblBalance.string=o.data)}},e.open("POST",a.Url.balanceURL(),!0),e.setRequestHeader("token",a.Url.token),e.send()},e.prototype.bindbox=function(){var t=this,e=new XMLHttpRequest;e.onreadystatechange=function(){if(4==e.readyState&&e.status>=200&&e.status<400){var i=e.responseText,o=JSON.parse(i);200===o.code&&(console.log(o.data),t.initblindboxMsg(o.data),t.refreshScrollview(o.data))}},e.open("POST",a.Url.blindbox(),!0),e.setRequestHeader("token",a.Url.token),e.send()},e.prototype.initblindboxMsg=function(t){for(var e=0;e<t.length;e++){var i=t[e],o={blindboxId:i.id,url:i.broadcastImages.split(",")[0],name:i.name,texture:null,bannerStatus:i.bannerStatus,cmoney:i.cmoney,stock:i.stock};this.blindboxMsg.push(o)}},e.prototype.refreshScrollview=function(t){var e=this,i=this.ctrl.node,o=i.getChildByName("itemTemp");o.active=!1;var n=i.getChildByName("mask");n.removeAllChildren();for(var c=0;c<t.length;c++)if(1==this.blindboxMsg[c].bannerStatus){var s=cc.instantiate(o);s.active=!0,n.addChild(s);var r=s.getChildByName("spr_m").getComponent(cc.Sprite);e.loadImg(e.blindboxMsg[c].url,c,r);var a=s.getChildByName("lbl_name").getComponent(cc.Label),l=d.Utils.subString(e.blindboxMsg[c].name,12,!0);a.string=l}else e.loadImg(e.blindboxMsg[c].url,c);this.msgTbl.setBlindboxMsg(this.blindboxMsg),this.ctrl.node.active=!0,this.schedule(this.onScrollRight,2.5)},e.prototype.loadImg=function(t,e,i){var o=this;cc.loader.load(t,function(t,n){o.blindboxMsg[e].texture=n,i&&(i.spriteFrame=new cc.SpriteFrame(n))})},e.prototype.onScrollRight=function(){this.ctrl.scrollToRight()},e.prototype.onBtnOne=function(t,e){this.nodOpen.initMsg(1),this.nodOpen.node.active=!0},e.prototype.onBtnTwo=function(t,e){this.nodOpen.initMsg(2),this.nodOpen.node.active=!0},e.prototype.onBtnThree=function(t,e){this.nodOpen.initMsg(3),this.nodOpen.node.active=!0},e.prototype.onBtnMoreLayer=function(){this.moreLayer.initUI(),this.moreLayer.node.active=!0},e.prototype.onBtnRankLayer=function(){this.rankLayer.active=!0},n([r(cc.Node)],e.prototype,"nodRule",void 0),n([r(cc.Node)],e.prototype,"nodView",void 0),n([r(cc.Label)],e.prototype,"lblOne",void 0),n([r(cc.Label)],e.prototype,"lblTwo",void 0),n([r(cc.Label)],e.prototype,"lblThree",void 0),n([r(cc.Label)],e.prototype,"lblBalance",void 0),n([r(l.default)],e.prototype,"ctrl",void 0),n([r(h.default)],e.prototype,"nodOpen",void 0),n([r(u.default)],e.prototype,"moreLayer",void 0),n([r(cc.Node)],e.prototype,"rankLayer",void 0),e=n([s],e)}(cc.Component);i.default=_,cc._RF.pop()},{"../framework/UIScrollSelect":"UIScrollSelect","../framework/Utils":"Utils","./MoreLayer":"MoreLayer","./MsgTbl":"MsgTbl","./NodOpen":"NodOpen","./Url":"Url"}],MoreLayer:[function(t,e,i){"use strict";cc._RF.push(e,"ed44fRCaAJGPZu92qYY7TRs","MoreLayer");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c=t("./MsgTbl"),s=t("./PropItem"),r=cc._decorator,a=r.ccclass,l=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.propItem=null,e.msgTbl=c.default.getInstance(),e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.initUI=function(){for(var t=0,e=this.msgTbl.getBlindboxMsg();t<e.length;t++){var i=e[t],o=cc.instantiate(this.propItem),n=o.getComponent(s.default),c={cmoney:i.cmoney,title:i.name,blindboxId:i.blindboxId,stock:i.stock};cc.log(i),n.initMsg(c),this.content.addChild(o)}},e.prototype.onBtnClose=function(){this.node.active=!1},n([l(cc.Node)],e.prototype,"content",void 0),n([l(cc.Prefab)],e.prototype,"propItem",void 0),e=n([a],e)}(cc.Component);i.default=h,cc._RF.pop()},{"./MsgTbl":"MsgTbl","./PropItem":"PropItem"}],MsgTbl:[function(t,e,i){"use strict";cc._RF.push(e,"dc3b8EeJlpMKZ2Ppk5UYCjm","MsgTbl"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(){this._blindboxMsg=[],this.fluoroscopy=0}return t.getInstance=function(){return null==this._instance&&(this._instance=new t),this._instance},t.prototype.setBlindboxMsg=function(t){this._blindboxMsg=t},t.prototype.getBlindboxMsg=function(){return this._blindboxMsg},t.prototype.getMsgByBlindboxID=function(t){for(var e=0;e<this._blindboxMsg.length;e++){var i=this._blindboxMsg[e];if(i.blindboxId==t)return i}return[]},t}();i.default=o,cc._RF.pop()},{}],NodOpen:[function(t,e,i){"use strict";cc._RF.push(e,"f3082YCAlJAFpeaaud+XITF","NodOpen");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c=t("./CheckLayer"),s=t("./MsgTbl"),r=t("./Url"),a=t("./OpenedLayer"),l=cc._decorator,h=l.ccclass,p=l.property,d=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.check=null,e.checkLayer=null,e.openedLayer=null,e.msgTbl=s.default.getInstance(),e.count=0,e}return o(e,t),e.prototype.start=function(){this.checkLayer.node.active=!1,this.schedule(this.bgRotation,.2)},e.prototype.bgRotation=function(){this.bg.angle=this.bg.angle+5},e.prototype.onBtnClose=function(){this.node.active=!1},e.prototype.onBtnCheck=function(){this.checkLayer.node.active=!0},e.prototype.onBtnOpen=function(t,e){cc.log(t),cc.log(e);var i=t.target.getComponent(cc.Button);i.interactable=!1;var o=this,n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&n.status>=200&&n.status<400){var t=n.responseText,e=JSON.parse(t);if(200===e.code){console.log(e.data),o.openedLayer.initMsg(e.data),o.openedLayer.node.active=!0,o.node.active=!1;var c=new cc.Event.EventCustom("balance",!0);o.node.dispatchEvent(c)}i.interactable=!0}},n.open("POST",r.Url.blindboxPick(this.count,0),!0),n.setRequestHeader("token",r.Url.token),n.send()},e.prototype.initMsg=function(t){this.count=t,this._initView()},e.prototype._initView=function(){this.count>1?this.check.active=!1:this.check.active=!0},n([p(cc.Node)],e.prototype,"bg",void 0),n([p(cc.Node)],e.prototype,"check",void 0),n([p(c.default)],e.prototype,"checkLayer",void 0),n([p(a.default)],e.prototype,"openedLayer",void 0),e=n([h],e)}(cc.Component);i.default=d,cc._RF.pop()},{"./CheckLayer":"CheckLayer","./MsgTbl":"MsgTbl","./OpenedLayer":"OpenedLayer","./Url":"Url"}],OpenedLayer:[function(t,e,i){"use strict";cc._RF.push(e,"a41b8Rx57BDqZ3r+uQvmWqs","OpenedLayer");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c=t("./MsgTbl"),s=t("./Item"),r=cc._decorator,a=r.ccclass,l=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.item=null,e.msgTbl=c.default.getInstance(),e.msg=null,e.id=null,e.items=[],e}return o(e,t),e.prototype.onLoad=function(){},e.prototype.start=function(){this.schedule(this.bgRotation,.2)},e.prototype.onDisable=function(){},e.prototype.bgRotation=function(){this.bg.angle=this.bg.angle+5},e.prototype.onBtnClose=function(){for(var t=0,e=this.items;t<e.length;t++){e[t].removeFromParent()}this.node.active=!1},e.prototype.initMsg=function(t){if(1==t.length){var e={cmoney:t[0].cmoney,title:t[0].title,blindboxId:t[0].blindboxId};this.item.initMsg(e),this.item.node.position=new cc.Vec2(0,0)}else{this.item.node.active=!1;var i=[cc.v2(-120,0),cc.v2(120,0)],o=[cc.v2(-120,0),cc.v2(120,0),cc.v2(0,-300)],n=[];n=2==t.length?i:o;for(var c=0;c<t.length;c++){var r=t[c],a=(e={cmoney:r.cmoney,title:r.title,blindboxId:r.blindboxId},cc.instantiate(this.item.node));a.active=!0,this.node.addChild(a),a.getComponent(s.default).initMsg(e),a.position=n[c],this.items.push(a)}}},n([l(cc.Node)],e.prototype,"bg",void 0),n([l(s.default)],e.prototype,"item",void 0),e=n([a],e)}(cc.Component);i.default=h,cc._RF.pop()},{"./Item":"Item","./MsgTbl":"MsgTbl"}],PropItem:[function(t,e,i){"use strict";cc._RF.push(e,"c3937e+u6JJUqoAo3M+VN3V","PropItem");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c=t("./MsgTbl"),s=cc._decorator,r=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxValue=null,e.propName=null,e.propPic=null,e.warehouse=null,e.msgTbl=c.default.getInstance(),e}return o(e,t),e.prototype.start=function(){},e.prototype.initMsg=function(t){this.boxValue.string=t.cmoney,this.propName.string=t.title;var e=this.msgTbl.getMsgByBlindboxID(t.blindboxId).texture;this.propPic.spriteFrame=new cc.SpriteFrame(e),t.stock>100?this.warehouse.string="\u5e93\u5b58\u5145\u8db3":this.warehouse.string="\u5e93\u5b58:"+t.stock},n([a(cc.Label)],e.prototype,"boxValue",void 0),n([a(cc.Label)],e.prototype,"propName",void 0),n([a(cc.Sprite)],e.prototype,"propPic",void 0),n([a(cc.Label)],e.prototype,"warehouse",void 0),e=n([r],e)}(cc.Component);i.default=l,cc._RF.pop()},{"./MsgTbl":"MsgTbl"}],RankItem:[function(t,e,i){"use strict";cc._RF.push(e,"e24bbvGl/9JBa1OvsU1LIs2","RankItem");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c=t("./MsgTbl"),s=cc._decorator,r=s.ccclass,a=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.boxValue=null,e.propName=null,e.propPic=null,e.userName=null,e.sprAvatar=null,e.msgTbl=c.default.getInstance(),e}return o(e,t),e.prototype.start=function(){},e.prototype.initMsg=function(t,e,i,o,n){this.boxValue.string=n,this.propName.string=t,this.userName.string=i,this.loadImg(e,this.propPic),this.load(o,this.sprAvatar)},e.prototype.loadImg=function(t,e){cc.loader.load(t,function(t,i){cc.log(t),e&&(e.spriteFrame=new cc.SpriteFrame(i))})},e.prototype.load=function(t,e){cc.loader.load({url:t,type:"png"},function(t,i){cc.log(t),e&&(e.spriteFrame=new cc.SpriteFrame(i))})},n([a(cc.Label)],e.prototype,"boxValue",void 0),n([a(cc.Label)],e.prototype,"propName",void 0),n([a(cc.Sprite)],e.prototype,"propPic",void 0),n([a(cc.Label)],e.prototype,"userName",void 0),n([a(cc.Sprite)],e.prototype,"sprAvatar",void 0),e=n([r],e)}(cc.Component);i.default=l,cc._RF.pop()},{"./MsgTbl":"MsgTbl"}],RankLayer:[function(t,e,i){"use strict";cc._RF.push(e,"87ee1shWf9FOZD63oK9w+e9","RankLayer");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c=t("./MsgTbl"),s=t("./Url"),r=t("./RankItem"),a=cc._decorator,l=a.ccclass,h=a.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.rankItem=null,e.msgTbl=c.default.getInstance(),e.recordFlag=!1,e.recordCurPage=0,e.myRecordCurPage=0,e}return o(e,t),e.prototype.onLoad=function(){this.getFakelotteryRecord(5,1)},e.prototype.initUI=function(){for(var t=0,e=this.msgTbl.getBlindboxMsg();t<e.length;t++){var i=e[t],o=cc.instantiate(this.rankItem),n=o.getComponent(r.default),c={cmoney:i.cmoney,title:i.name,blindboxId:i.blindboxId,stock:i.stock};cc.log(i),n.initMsg(c),this.content.addChild(o)}},e.prototype.onBtnClose=function(){this.node.active=!1},e.prototype.getFakelotteryRecord=function(t,e,i){var o=this;this.recordFlag=!1;var n=new XMLHttpRequest;n.onreadystatechange=function(){if(4==n.readyState&&n.status>=200&&n.status<400){var t=n.responseText,c=JSON.parse(t);cc.log(c),200===c.code&&(console.log(c.data),o.recordCurPage=e,o.refreshRecord(c.data.rows,i),c.data.rows.length>0&&(o.recordFlag=!0))}},n.open("POST",s.Url.mixedBlindboxRecord(t,e),!0),n.setRequestHeader("token",s.Url.token),n.send()},e.prototype.refreshRecord=function(t,e){cc.log(t),e&&this.content.removeAllChildren();for(var i=0;i<t.length;i++){var o=t[i],n=cc.instantiate(this.rankItem);n.active=!0,n.getComponent(r.default).initMsg(o.name,o.image,o.username,o.avatar,o.cmoney),this.content.addChild(n)}},e.prototype.onRecordScroll=function(t,e){e==cc.ScrollView.EventType.BOUNCE_BOTTOM&&this.recordFlag&&(cc.log("buttom"),this.getFakelotteryRecord(4,this.myRecordCurPage+1))},n([h(cc.Node)],e.prototype,"content",void 0),n([h(cc.Prefab)],e.prototype,"rankItem",void 0),e=n([l],e)}(cc.Component);i.default=p,cc._RF.pop()},{"./MsgTbl":"MsgTbl","./RankItem":"RankItem","./Url":"Url"}],UIScrollSelect:[function(t,e,i){"use strict";cc._RF.push(e,"fe30cIKgMVEZorFzuVDoGsT","UIScrollSelect");var o=this&&this.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function o(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}}(),n=this&&this.__decorate||function(t,e,i,o){var n,c=arguments.length,s=c<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(n=t[r])&&(s=(c<3?n(s):c>3?n(e,i,s):n(e,i))||s);return c>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var c,s=cc._decorator,r=s.ccclass,a=s.property;(function(t){t[t.SCROLL_START=0]="SCROLL_START",t[t.SCROLL_ING=1]="SCROLL_ING",t[t.SCROLL_END=2]="SCROLL_END"})(c=i.EventType||(i.EventType={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=null,e.deltaX=100,e.centerScale=1,e.minScale=1,e.scrollSpeed=300,e.selectEvents=[],e.childs=[],e.isTouching=!1,e.hasTouchMove=!1,e.isTestX=!1,e._touchId=null,e.currentIndex=0,e._toMoveX=1,e.dx=0,e.moveAim=0,e}return o(e,t),e.prototype.onLoad=function(){cc.log("---onload"),this.childs=[];for(var t=0;t<this.content.children.length;t++)this.childs[t]=this.content.children[t],this.childs[t].x=this.deltaX*(t-1);this.isTouching=!1,this.hasTouchMove=!1,this.isTestX=!1,this._touchId=null,this.scrollTo(0,!1)},e.prototype.scrollTo=function(t,e){if(void 0===e&&(e=!0),t<0&&t>=this.childs.length)return console.error(this.node.name+"->\u79fb\u52a8\u8d85\u51fa\u8fb9\u754c\u9762");if(this.currentIndex=t,this.moveAim=t,e)this.isTestX=!0,cc.Component.EventHandler.emitEvents(this.selectEvents,{target:this,type:c.SCROLL_START,index:this.currentIndex});else for(var i=0;i<this.childs.length;i++)this._checkChildX(this.childs[i],(i-t)*this.deltaX)},e.prototype.scrollToLeft=function(){this._toMoveX=1,this.scrollTo((this.currentIndex-1+this.childs.length)%this.childs.length)},e.prototype.scrollToRight=function(){this._toMoveX=-1,this.scrollTo((this.currentIndex+1+this.childs.length)%this.childs.length)},e.prototype._checkChildX=function(t,e){e>this.childs.length/2*this.deltaX?e-=this.childs.length*this.deltaX:e<-this.childs.length/2*this.deltaX&&(e+=this.childs.length*this.deltaX),t.x=e;var i=Math.min(Math.abs(e),this.deltaX);t.scale=(1-i/this.deltaX)*(this.centerScale-this.minScale)+this.minScale},e.prototype.start=function(){this.content.on(cc.Node.EventType.TOUCH_START,this._onTouch,this),this.content.on(cc.Node.EventType.TOUCH_MOVE,this._onTouch,this),this.content.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.content.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchEnd,this)},e.prototype._onTouch=function(t){if(null==this._touchId||t.touch==this._touchId)if(t.type!=cc.Node.EventType.TOUCH_START){this.hasTouchMove=!0;var e=t.getLocation().x-this.dx;this._move(e),this.dx=t.getLocation().x;var i={target:this,type:c.SCROLL_ING,dx:this.dx};cc.Component.EventHandler.emitEvents(this.selectEvents,i)}else{this.isTouching=!0,this.hasTouchMove=!1,this.isTestX=!1,this._touchId=t.touch,this.dx=t.getStartLocation().x;var o={target:this,type:c.SCROLL_START,index:this.currentIndex};cc.Component.EventHandler.emitEvents(this.selectEvents,o)}},e.prototype._onTouchEnd=function(t){if(null==this._touchId||t.touch==this._touchId){this.isTouching=!1,t.type!=cc.Node.EventType.TOUCH_END&&t.type!=cc.Node.EventType.TOUCH_CANCEL||(this._touchId=null);var e=this.node.convertToNodeSpaceAR(t.getLocation());if(this.hasTouchMove){for(var i=this.deltaX,o=0,n=0;n<this.childs.length;n++)Math.abs(this.childs[n].x)<=i&&(i=Math.abs(this.childs[n].x),o=n);this.moveAim=o,this._toMoveX=this.childs[o].x>=0?-1:1,this.isTestX=!0}else{var s=Math.ceil((e.x-this.deltaX/2)/this.deltaX);if(0===s){var r={target:this,type:c.SCROLL_END,index:this.currentIndex};cc.Component.EventHandler.emitEvents(this.selectEvents,r)}else this.moveAim=(this.currentIndex+s+this.childs.length)%this.childs.length,this._toMoveX=s>0?-1:1,this.isTestX=!0}}},e.prototype._move=function(t){for(var e=0;e<this.childs.length;e++)this._checkChildX(this.childs[e],this.childs[e].x+t)},e.prototype.update=function(t){if(!this.isTouching&&this.isTestX){for(var e=this._toMoveX*t*this.scrollSpeed,i=this.childs[this.moveAim].x,o=0;o<this.childs.length;o++)this._checkChildX(this.childs[o],this.childs[o].x+e);var n=this.childs[0].x,s=Math.round(n/this.deltaX),r=this.deltaX*s,a=this.childs[this.moveAim].x;if(i*a<0&&Math.abs(a)<this.deltaX){this.isTestX=!1;for(var l=0;l<this.childs.length;l++)if(Math.abs(this.childs[l].x)<=Math.abs(e)){this.currentIndex=l;break}for(o=0;o<this.childs.length;o++)this._checkChildX(this.childs[o],this.childs[o].x+r-n);var h={target:this,type:c.SCROLL_END,index:this.currentIndex};cc.Component.EventHandler.emitEvents(this.selectEvents,h)}}},e.EventType=c,n([a(cc.Node)],e.prototype,"content",void 0),n([a({type:cc.Integer,tooltip:"\u5355\u4e2a\u63a7\u4ef6\u4e4b\u95f4\u7684\u8ddd\u79bb"})],e.prototype,"deltaX",void 0),n([a({type:cc.Float,tooltip:"\u4e2d\u5fc3\u70b9\u7684\u7f29\u653e\u6bd4\u4f8b"})],e.prototype,"centerScale",void 0),n([a({type:cc.Float,tooltip:"\u8fb9\u7f18\u70b9\u7684\u7f29\u653e\u6bd4\u4f8b"})],e.prototype,"minScale",void 0),n([a({type:cc.Float,tooltip:"\u6eda\u52a8\u65f6\u7684\u901f\u5ea6"})],e.prototype,"scrollSpeed",void 0),n([a({type:cc.Component.EventHandler,tooltip:"\u9009\u62e9\u540e\u7684\u56de\u8c03"})],e.prototype,"selectEvents",void 0),e=n([r],e)}(cc.Component);i.default=l,cc._RF.pop()},{}],Url:[function(t,e,i){"use strict";cc._RF.push(e,"89f83kkX/tAJbqXX/8WuBix","Url"),Object.defineProperty(i,"__esModule",{value:!0});var o="https://ddyladmin.zhowin.com/dev-api",n=function(){function t(){}return t.balanceURL=function(){return"https://ddyladmin.zhowin.com/dev-api/api/active/balance"},t.blindboxPrice=function(){return"https://ddyladmin.zhowin.com/dev-api/api/active/blindboxPrice"},t.blindbox=function(){return"https://ddyladmin.zhowin.com/dev-api/api/active/blindbox"},t.blindboxPick=function(t,e){return o+"/api/active/blindboxPick?count="+t+"&useFluoroscopy="+e},t.openBlindboxAfterCheck=function(t,e){return o+"/api/active/openBlindboxAfterCheck?open="+t+"&recordId="+e},t.mixedBlindboxRecord=function(t,e){return o+"/api/active/mixedBlindboxRecord?pageSize="+t+"&pageNum="+e},t.token="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJyb2xlIjoibm9ybWFsIiwicGFsdGZvcm1JZCI6MSwiZXhwIjoxNjA0ODA3MTk4LCJ1c2VySWQiOjEsImRldmljZUlkIjoiMSIsImlhdCI6MTYwMjIxNTE5OH0.CWlsf9DrvgtoLZN_QqF76uaa1FAB6ibld5f3djH9OlY",t}();i.Url=n,cc._RF.pop()},{}],Utils:[function(t,e,i){"use strict";cc._RF.push(e,"5fa4aP1kRtOe4IssP6nARz8","Utils"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(){}return t.randomNum=function(t,e){switch(arguments.length){case 1:return parseInt((Math.random()*t+1).toString(),10);case 2:return parseInt(Math.random()*(e-t+1)+t,10);default:return 0}},t.subString=function(t,e,i){for(var o=0,n="",c=/[^\x00-\xff]/g,s="",r=t.replace(c,"**").length,a=0;a<r&&(null!=(s=t.charAt(a).toString()).match(c)?o+=2:o++,!(o>e));a++)n+=s;return i&&r>e&&(n+="..."),n},t}();i.Utils=o,cc._RF.pop()},{}],toast:[function(t,e,i){"use strict";cc._RF.push(e,"f53a0pl5m1NSoh/roVHxwD1","toast"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function t(){this.toastNode=null,this.bgSprite=null,this.spriteFrame=null,this.textNode=null,this.textLabel=null,this.canvas=null,this.toastNode=new cc.Node,this.toastNode.active=!1,this.toastNode.zIndex=1e4,this.canvas=cc.director.getScene().getComponentInChildren(cc.Canvas),this.canvas.node.addChild(this.toastNode),this.bgSprite=this.toastNode.addComponent(cc.Sprite),this.bgSprite.trim=!0,this.bgSprite.type=cc.Sprite.Type.SLICED;var t=this;cc.loader.loadRes("bg_gray",function(e,i){e?cc.error(e):(t.spriteFrame=new cc.SpriteFrame(i),t.bgSprite.spriteFrame=t.spriteFrame)});var e=this.toastNode.addComponent(cc.Widget);e.isAlignBottom=!0,e.isAbsoluteBottom=!1,e.bottom=.1,e.isAlignHorizontalCenter=!0,e.horizontalCenter=0,e.alignMode=cc.Widget.AlignMode.ONCE;var i=this.toastNode.addComponent(cc.Layout);i.resizeMode=cc.Layout.ResizeMode.CONTAINER,i.padding=5,this.textNode=new cc.Node,this.toastNode.addChild(this.textNode),this.textNode.position=cc.Vec2.ZERO,this.textLabel=this.textNode.addComponent(cc.Label),this.textLabel.fontSize=25,this.textLabel.lineHeight=25}return Object.defineProperty(t,"instance",{get:function(){return null==this._instance&&(this._instance=new t),this._instance},enumerable:!0,configurable:!0}),t.prototype.showText=function(t,e){var i=this;void 0===e&&(e=.5),t.length*this.textLabel.fontSize>.8*this.canvas.node.width&&(this.textLabel.overflow=cc.Label.Overflow.RESIZE_HEIGHT,this.textLabel.node.width=.8*this.canvas.node.width),this.textLabel.string=t,this.toastNode.active=!0,this.toastNode.opacity=200,this.toastNode.runAction(cc.sequence(cc.delayTime(e),cc.fadeOut(.2),cc.callFunc(function(){i.toastNode.active=!1},this)))},t._instance=null,t}();i.Toast=o,cc._RF.pop()},{}]},{},["BackgroundAdapter","List","ListItem","UIScrollSelect","Utils","toast","BoxCtrl","BoxItem","CheckLayer","CheckOpenLayer","Item","MainScene","MoreLayer","MsgTbl","NodOpen","OpenedLayer","PropItem","RankItem","RankLayer","Url"]);